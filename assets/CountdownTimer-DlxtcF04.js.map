{"version":3,"file":"CountdownTimer-DlxtcF04.js","sources":["../../src/store/timerStore.ts","../../src/components/shared/CountdownTimer.vue"],"sourcesContent":["import { ref } from 'vue';\n\n// Total time for the challenge in seconds (5 minutes)\nconst INITIAL_TIME = 300;\n\n// Create a reactive store for the timer\nconst timeLeft = ref(INITIAL_TIME);\nconst isRunning = ref(false);\nlet timerInterval: number | null = null;\n\nexport const timerStore = {\n  // State\n  timeLeft,\n  isRunning,\n  \n  // Actions\n  startTimer() {\n    if (isRunning.value) return;\n    \n    isRunning.value = true;\n    timerInterval = window.setInterval(() => {\n      if (timeLeft.value > 0) {\n        timeLeft.value--;\n      } else {\n        this.stopTimer();\n        // Game over logic will be handled in the components\n      }\n    }, 1000);\n  },\n  \n  stopTimer() {\n    if (timerInterval) {\n      clearInterval(timerInterval);\n      timerInterval = null;\n      isRunning.value = false;\n    }\n  },\n  \n  resetTimer() {\n    this.stopTimer();\n    timeLeft.value = INITIAL_TIME;\n  },\n  \n  // Computed values\n  getFormattedTime(): string {\n    const minutes = Math.floor(timeLeft.value / 60);\n    const seconds = timeLeft.value % 60;\n    return `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;\n  },\n  \n  getProgressPercentage(): number {\n    return (timeLeft.value / INITIAL_TIME) * 100;\n  },\n  \n  // Cleanup\n  dispose() {\n    this.stopTimer();\n  }\n};\n\n// Make sure the timer is cleaned up when the app is closed\nwindow.addEventListener('beforeunload', () => {\n  timerStore.dispose();\n});","<script setup lang=\"ts\">\nimport { onUnmounted, computed, watch } from 'vue';\nimport { useRouter } from 'vue-router';\nimport { timerStore } from '../../store/timerStore';\n\nconst props = defineProps<{\n  start?: boolean;\n}>();\n\nconst emit = defineEmits<{\n  (e: 'timeUp'): void;\n}>();\n\nconst router = useRouter();\n\n// Use the shared timer state from timerStore\nconst timeLeft = computed(() => timerStore.timeLeft.value);\nconst isRunning = computed(() => timerStore.isRunning.value);\n\n// Format time as MM:SS using the store's helper method\nconst formattedTime = computed(() => timerStore.getFormattedTime());\n\n// Progress percentage for visual indicator using the store's helper method\nconst progressPercentage = computed(() => timerStore.getProgressPercentage());\n\n// Game over when time runs out\nwatch(timeLeft, (newValue) => {\n  if (newValue === 0) {\n    emit('timeUp');\n    router.push('/game-over');\n  }\n});\n\n// Watch for start prop changes\nwatch(() => props.start, (newVal) => {\n  if (newVal && !isRunning.value) {\n    startTimer();\n  } else if (!newVal && isRunning.value) {\n    stopTimer();\n  }\n}, { immediate: true });\n\n// These methods now just delegate to the timerStore\nfunction startTimer() {\n  timerStore.startTimer();\n}\n\nfunction stopTimer() {\n  timerStore.stopTimer();\n}\n\nfunction resetTimer() {\n  timerStore.resetTimer();\n}\n\n// Setup and cleanup\nonUnmounted(() => {\n  // No need to stop the timer here, as we want it to continue running across component changes\n});\n\ndefineExpose({\n  startTimer,\n  stopTimer,\n  resetTimer,\n  timeLeft,\n});\n</script>\n\n<template>\n  <div class=\"countdown-timer\">\n    <div class=\"timer-display\" :class=\"{ 'warning': timeLeft < 60, 'danger': timeLeft < 30 }\">\n      {{ formattedTime }}\n    </div>\n    <div class=\"progress-bar\">\n      <div class=\"progress\" :style=\"{ width: `${progressPercentage}%` }\"></div>\n    </div>\n  </div>\n</template>\n\n<style scoped>\n.countdown-timer {\n  width: 100%;\n  max-width: 400px;\n  margin: 0 auto;\n  text-align: center;\n  padding: 10px;\n  background-color: rgba(0, 0, 0, 0.8);\n  border-radius: 8px;\n  box-shadow: 0 0 15px rgba(255, 0, 0, 0.5);\n}\n\n.timer-display {\n  font-family: 'Courier New', Courier, monospace;\n  font-size: 2.5rem;\n  font-weight: bold;\n  color: #33ff33;\n  text-shadow: 0 0 10px rgba(51, 255, 51, 0.7);\n  margin-bottom: 10px;\n}\n\n.timer-display.warning {\n  color: #ffff33;\n  text-shadow: 0 0 10px rgba(255, 255, 51, 0.7);\n}\n\n.timer-display.danger {\n  color: #ff3333;\n  text-shadow: 0 0 10px rgba(255, 51, 51, 0.7);\n  animation: pulse 1s infinite;\n}\n\n.progress-bar {\n  height: 10px;\n  background-color: rgba(255, 255, 255, 0.2);\n  border-radius: 5px;\n  overflow: hidden;\n}\n\n.progress {\n  height: 100%;\n  background-color: #33ff33;\n  transition: width 1s linear;\n}\n\n.timer-display.warning + .progress-bar .progress {\n  background-color: #ffff33;\n}\n\n.timer-display.danger + .progress-bar .progress {\n  background-color: #ff3333;\n}\n\n@keyframes pulse {\n  0% { opacity: 1; }\n  50% { opacity: 0.5; }\n  100% { opacity: 1; }\n}\n</style>"],"names":["INITIAL_TIME","timeLeft","ref","isRunning","timerInterval","timerStore","minutes","seconds","props","__props","emit","__emit","router","useRouter","computed","formattedTime","progressPercentage","watch","newValue","newVal","startTimer","stopTimer","resetTimer","onUnmounted","__expose"],"mappings":"iLAGA,MAAMA,EAAe,IAGfC,EAAWC,EAAIF,CAAY,EAC3BG,EAAYD,EAAI,EAAK,EAC3B,IAAIE,EAA+B,KAE5B,MAAMC,EAAa,CAExB,SAAAJ,EACA,UAAAE,EAGA,YAAa,CACPA,EAAU,QAEdA,EAAU,MAAQ,GACFC,EAAA,OAAO,YAAY,IAAM,CACnCH,EAAS,MAAQ,EACVA,EAAA,QAET,KAAK,UAAU,GAGhB,GAAI,EACT,EAEA,WAAY,CACNG,IACF,cAAcA,CAAa,EACXA,EAAA,KAChBD,EAAU,MAAQ,GAEtB,EAEA,YAAa,CACX,KAAK,UAAU,EACfF,EAAS,MAAQD,CACnB,EAGA,kBAA2B,CACzB,MAAMM,EAAU,KAAK,MAAML,EAAS,MAAQ,EAAE,EACxCM,EAAUN,EAAS,MAAQ,GACjC,MAAO,GAAGK,EAAQ,SAAS,EAAE,SAAS,EAAG,GAAG,CAAC,IAAIC,EAAQ,SAAS,EAAE,SAAS,EAAG,GAAG,CAAC,EACtF,EAEA,uBAAgC,CACtB,OAAAN,EAAS,MAAQD,EAAgB,GAC3C,EAGA,SAAU,CACR,KAAK,UAAU,CAAA,CAEnB,EAGA,OAAO,iBAAiB,eAAgB,IAAM,CAC5CK,EAAW,QAAQ,CACrB,CAAC,mKC1DD,MAAMG,EAAQC,EAIRC,EAAOC,EAIPC,EAASC,EAAU,EAGnBZ,EAAWa,EAAS,IAAMT,EAAW,SAAS,KAAK,EACnDF,EAAYW,EAAS,IAAMT,EAAW,UAAU,KAAK,EAGrDU,EAAgBD,EAAS,IAAMT,EAAW,kBAAkB,EAG5DW,EAAqBF,EAAS,IAAMT,EAAW,uBAAuB,EAGtEY,EAAAhB,EAAWiB,GAAa,CACxBA,IAAa,IACfR,EAAK,QAAQ,EACbE,EAAO,KAAK,YAAY,EAC1B,CACD,EAGDK,EAAM,IAAMT,EAAM,MAAQW,GAAW,CAC/BA,GAAU,CAAChB,EAAU,MACZiB,EAAA,EACF,CAACD,GAAUhB,EAAU,OACpBkB,EAAA,CACZ,EACC,CAAE,UAAW,GAAM,EAGtB,SAASD,GAAa,CACpBf,EAAW,WAAW,CAAA,CAGxB,SAASgB,GAAY,CACnBhB,EAAW,UAAU,CAAA,CAGvB,SAASiB,GAAa,CACpBjB,EAAW,WAAW,CAAA,CAIxB,OAAAkB,EAAY,IAAM,CAAA,CAEjB,EAEYC,EAAA,CACX,WAAAJ,EACA,UAAAC,EACA,WAAAC,EACA,SAAArB,CAAA,CACD"}